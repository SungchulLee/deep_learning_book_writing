# 35.5.2 Regime Changes

## Learning Objectives

- Detect and characterize market regimes (bull, bear, high-vol, low-vol)
- Implement Hidden Markov Model regime detection for RL
- Design regime-conditioned policies that adapt behavior
- Build ensemble approaches with regime-specific sub-policies

## Introduction

Financial markets exhibit distinct regimesâ€”periods with statistically different return, volatility, and correlation characteristics. A trending bull market requires different trading behavior than a volatile crisis period. RL agents that ignore regime structure learn averaged policies that perform sub-optimally in all regimes.

## Regime Characteristics

| Regime | Returns | Volatility | Correlations | Duration |
|--------|---------|-----------|-------------|----------|
| Bull/trending | Positive | Low-medium | Low | Months-years |
| Bear/crisis | Negative | High | High (correlated sell-off) | Weeks-months |
| Mean-reverting | Near zero | Low | Moderate | Months |
| High volatility | Variable | Very high | Unstable | Days-weeks |

## Regime Detection Methods

### 1. Hidden Markov Model (HMM)

Model returns as generated by a latent Markov chain:

$$P(r_t | z_t = k) = \mathcal{N}(\mu_k, \sigma_k^2)$$
$$P(z_t = j | z_{t-1} = i) = A_{ij}$$

### 2. Threshold-Based

Simple rules using volatility, drawdown, or trend indicators.

### 3. Clustering

K-means or Gaussian Mixture Models on feature vectors (return, vol, correlation).

## Regime-Conditioned Policies

### Approach 1: Regime as State Feature

$$s_t^{\text{aug}} = (s_t, \hat{z}_t, P(z_t = 1), \ldots, P(z_t = K))$$

### Approach 2: Mixture of Experts

$$\pi(a|s) = \sum_{k=1}^{K} P(z_t = k | s_t) \cdot \pi_k(a|s_t)$$

### Approach 3: Hierarchical Policy

A meta-controller selects which sub-policy to activate based on the detected regime.

## Summary

Regime-aware RL adapts policy behavior to current market conditions, significantly improving robustness. Hidden Markov Models provide a principled framework for regime detection, while mixture-of-experts and hierarchical policies enable regime-specific behavior.

## References

- Hamilton, J. (1989). A New Approach to the Economic Analysis of Nonstationary Time Series. Econometrica.
- Ang, A. & Bekaert, G. (2002). Regime Switches in Interest Rates. Journal of Business & Economic Statistics.
